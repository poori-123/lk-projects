"use strict";$(".header").load("./header.html"),$(".footer").load("./footer.html");var key=getQueryString("type"),$contentGoodsList=$(".content-goodsList ul"),$filterPrice=$(".content-nav-list .price p"),$sort=$(".content-nav-list .rank p"),$sortPrice=$(".content-nav-list .sortPrice"),dataArr=null;function dataSort(t,n){for(var a=0,s=t.length;a<s-1;a++)for(var e,o=0;o<s-a-1;o++){parseInt($(t[o]).find("h4").find("span").text())<parseInt($(t[o+1]).find("h4").find("span").text())&&(e=0,e=t[o],t[o]=t[o+1],t[o+1]=e)}return 1==n?t:t.reverse()}function appendData(){$contentGoodsList.html("");for(var t=0;t<20;t++){var n,a=t%dataArr.length,s="",e="";dataArr[a].discounts.forEach(function(t){s+="<b>".concat(t,"</b>")}),dataArr[a].promotion&&(e=0===dataArr[a].promotion.type?'<p><span class="redicon">'.concat(dataArr[a].promotion.msg,"</span></p>"):'<p><span class="blueicon">'.concat(dataArr[a].promotion.msg,"</span></p>")),n='<li><a href="./goodsDetail.html?type='.concat(key,"&code=").concat(dataArr[a].code,'" target="_blank">\n            <img src="').concat(dataArr[a].imgsrc,'" alt="">\n            <h3>').concat(dataArr[a].name,"</h3>\n            <h4>￥<span>").concat(dataArr[a].price,"</span>起<i>多款可选</i></h4>\n            <h5>").concat(s,"</h5>\n            <h6><span>").concat(dataArr[a].evaluate,"</span>人评价 <i>").concat(dataArr[a].goodReputation,"</i>好评</h6>\n            ").concat(e,"\n        </a></li>"),$contentGoodsList.append(n)}}"mobilephone"===key&&($(".content-nav-tit i").text("手机"),$(".content-nav-list ul").find(".classify").text("手机"),$("title").text("华为手机大全_华为智能手机")),"laptop"===key&&($(".content-nav-tit i").text("笔记本"),$(".content-nav-list ul").find(".classify").text("笔记本"),$(".content-nav-list .screenSize").remove(),$(".content-nav-list .more").remove(),$("title").text("笔记本_华为商城")),$.ajax({url:"../data/"+key+".json",type:"get",gataType:"json",success:function(t){dataArr=Object.values(t),appendData()}}),$filterPrice.click(function(){var t=$contentGoodsList.find("li");if($(this).hasClass("on"))$(this).removeClass("on"),t.css("display","block");else{var n=parseInt($(this).find(".min").text()),a=parseInt($(this).find(".max").text());$filterPrice.removeClass("on"),$(this).addClass("on");for(var s=0;s<t.length;s++){var e=parseInt(t.eq(s).find("h4").find("span").text());e<n||a<e?t.eq(s).css("display","none"):t.eq(s).css("display","block")}}}),$sortPrice.click(function(){$(this).hasClass("on")?0==$(this).attr("state")?($(this).css("background","url(../img/sortPicon2.png) no-repeat right 0 center"),$(this).attr("state",1)):($(this).css("background","url(../img/sortPicon3.png) no-repeat right 0 center"),$(this).attr("state",0)):($sort.removeClass("on"),$(this).addClass("on"),$(this).css("background","url(../img/sortPicon2.png) no-repeat right 0 center"),$(this).attr("state",1));var t=Array.from($contentGoodsList.children());dataSort(t,$(this).attr("state")),$contentGoodsList.html(""),$(t).each(function(t,n){$contentGoodsList.append(n)})}),$sort.click(function(){$(this).hasClass("sortPrice")||($sortPrice.hasClass("on")&&($sortPrice.css("background","url(../img/sortPicon1.png) no-repeat right 0 center"),$sortPrice.attr("state",0),appendData()),$sort.removeClass("on"),$(this).addClass("on"))});