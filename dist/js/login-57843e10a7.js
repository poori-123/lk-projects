"use strict";var userObj,userStr;$(".content-bot-right .psd i").click(function(){showH.call(this)}),localStorage.getItem("user")||(userObj={admin:{psd:"123456",nickname:"管理员",phone:"17835699999"},xiaoming:{psd:"123456",nickname:"小明",phone:"17835698888"},xiaohong:{psd:"123456",nickname:"小红",phone:"17835697777"}},userStr=JSON.stringify(userObj),localStorage.setItem("user",userStr));var $username=$(".content-bot-right .username"),$userpsd=$(".content-bot-right .userpsd"),$notice=$(".content-bot-right .notice"),$change=$(".content-bot-right .change span"),$loginBtn=$(".content-bot-right .loginBtn"),$loginMask=$(".content-bot-right .mask");$username.focus(function(){$(this).attr("state")&&$(this).css("border-color","#007DFF")}),$username.blur(function(){$username.val().length<4||80<$username.val().length?($notice.text("华为账号限制在4~80个字符"),$notice.css("display","block"),$userpsd.css("border-color","#fff"),$(this).css("border-color","#FA2A2D"),$(this).attr("state","false")):($notice.css("display","none"),$(this).css("border-color","#fff"),$(this).attr("state","true"))}),$userpsd.focus(function(){$(this).attr("state")&&$(this).css("border-color","#007DFF")}),$userpsd.blur(function(){"true"===$username.attr("state")?""==$userpsd.val()?($notice.text("请输入您的密码"),$notice.css("display","block"),$(this).css("border-color","#FA2A2D"),$(this).attr("state","false")):($notice.css("display","none"),$(this).css("border-color","#fff"),$(this).attr("state","true")):$(this).css("border-color","#fff")}),$username[0].oninput=function(){""!=$username.val()&&""!=$userpsd.val()&&$loginMask.css("display","none")},$userpsd[0].oninput=function(){""!=$username.val()&&""!=$userpsd.val()&&$loginMask.css("display","none")},$change.click(function(){0==$(this).attr("code")?($(this).text("切换本地登录"),$(this).attr("code",1),$loginBtn.attr("code",1)):($(this).text("切换在线登录"),$(this).attr("code",0),$loginBtn.attr("code",0))});var userTable=JSON.parse(localStorage.getItem("user"));$loginBtn.click(function(){var s,t,e;"0"===$(this).attr("code")&&(s=$username.val(),t=$userpsd.val(),userTable[s]?t==userTable[s].psd?(setCookie({key:"username",val:s,days:7}),setCookie({key:"userpsd",val:t,days:7}),$(".loginTrue").css("display","block"),$(".loginTrue").find("h3").text("登录成功"),$(".loginTrue").find("h4").html("<span>5</span>秒后自动跳转至主页!"),$(".loginTrue").find("a").attr("href","./index.html"),e=setInterval(function(){var s=$(".loginTrue").find("span").text();s--,$(".loginTrue").find("span").text(s),0==s&&(clearInterval(e),window.open("./index.html","_self"))},1e3)):($notice.text("密码输入错误"),$notice.css("display","block"),$userpsd.attr("state","false"),$userpsd.focus(),$userpsd.css("border-color","#FA2A2D")):($notice.text("账号不存在"),$notice.css("display","block"),$username.attr("state","false"),$username.focus(),$username.css("border-color","#FA2A2D")))}),window.onload=function(){getCookie("username")&&($username.val(getCookie("username")),$userpsd.val(getCookie("userpsd")),$loginMask.css("display","none"))},$(".content-bot-right .add").click(function(){$("title").text("华为账号-注册"),$(".login").css("display","none"),$(".registerWrap").css("display","block")});var key=getQueryString("register");"register"==key?($("title").text("华为账号-注册"),$(".login").css("display","none"),$(".registerWrap").css("display","block")):$("title").text("华为账号-登录"),$(".content-bot-right .add").click(function(){$(".login").css("display","none"),$(".registerWrap").css("display","block")});var $regNickname=$(".register .regNickname"),$regUsername=$(".register .regUsername"),$regUserpsd1=$(".register .regUserpsd1"),$regUserpsd2=$(".register .regUserpsd2"),$regPhone=$(".register .regPhone"),$regBtn=$(".register .regBtn"),$regInput=$(".register input");function showH(){0==$(this).attr("state")?($(this).css("background","url(../img/loginpsd2.png) no-repeat center"),$(this).siblings("input").attr("type","text"),$(this).attr("state",1)):($(this).css("background","url(../img/loginpsd1.png) no-repeat center"),$(this).siblings("input").attr("type","password"),$(this).attr("state",0))}$regUserpsd1.siblings("b").click(function(){showH.call(this)}),$regUserpsd2.siblings("b").click(function(){showH.call(this)}),$regNickname.focus(function(){"true"==$(this).attr("state")&&$(this).css("border-color","#007DFF")}),$regNickname.blur(function(){""==$(this).val()?($(this).siblings("i").css("display","block"),$(this).css("border-color","#FA2A2D"),$(this).attr("state","false")):($(this).siblings("i").css("display","none"),$(this).css("border-color","#007DFF"),$(this).attr("state","true"))}),$regUsername.focus(function(){"true"==$(this).attr("state")&&$(this).css("border-color","#007DFF")}),$regUsername.blur(function(){$(this).val().length<4||80<$(this).val().length?($(this).siblings("i").css("display","block"),$(this).css("border-color","#FA2A2D"),$(this).attr("state","false")):($(this).siblings("i").css("display","none"),$(this).css("border-color","#007DFF"),$(this).attr("state","true"))}),$regUserpsd1.focus(function(){"true"==$(this).attr("state")&&$(this).css("border-color","#007DFF")}),$regUserpsd1.blur(function(){""==$(this).val()?($(this).siblings("i").css("display","block"),$(this).css("border-color","#FA2A2D"),$(this).attr("state","false")):($(this).siblings("i").css("display","none"),$(this).css("border-color","#007DFF"),$(this).attr("state","true"))}),$regUserpsd2.focus(function(){"true"==$(this).attr("state")&&$(this).css("border-color","#007DFF")}),$regUserpsd2.blur(function(){$(this).val()!=$regUserpsd1.val()||""==$(this).val()?($(this).siblings("i").css("display","block"),$(this).css("border-color","#FA2A2D"),$(this).attr("state","false")):($(this).siblings("i").css("display","none"),$(this).css("border-color","#007DFF"),$(this).attr("state","true"))}),$regPhone.focus(function(){"true"==$(this).attr("state")&&$(this).css("border-color","#007DFF")}),$regPhone.blur(function(){$this=$(this);/^(1|\+861)[3-8]{1}\d{9}$/.test($this.val())?($(this).siblings("i").css("display","none"),$(this).css("border-color","#007DFF"),$(this).attr("state","true")):($(this).siblings("i").css("display","block"),$(this).css("border-color","#FA2A2D"),$(this).attr("state","false"))}),$regInput.keyup(function(){""!=$regNickname.val()&&""!=$regUsername.val()&&""!=$regUserpsd1.val()&&""!=$regUserpsd2.val()&&""!=$regPhone.val()&&$regBtn.siblings("span").css("display","none")}),$regBtn.click(function(){if(userTable[$regUsername.val()])return $regUsername.siblings("i").text("用户名已被占用"),$regUsername.siblings("i").css("display","block"),$regUsername.css("border-color","#FA2A2D"),void $regUsername.attr("state","false");var s,t,e=0;$regInput.each(function(s,t){"true"==$(t).attr("state")&&e++}),5==e&&(userTable[$regUsername.val()]={psd:$regUserpsd1.val(),nickname:$regNickname.val(),phone:$regPhone.val()},s=JSON.stringify(userTable),localStorage.setItem("user",s),$(".loginTrue").css("display","block"),$(".loginTrue").find("h3").text("注册成功"),$(".loginTrue").find("h4").html("<span>5</span>秒后自动跳转至登录页!"),$(".loginTrue").find("a").attr("href","./login.html"),t=setInterval(function(){var s=$(".loginTrue").find("span").text();s--,$(".loginTrue").find("span").text(s),0==s&&(clearInterval(t),window.open("./login.html","_self"))},1e3))});